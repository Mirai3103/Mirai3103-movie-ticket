const permision = [
  {
    MaQuyen: "69",
    TenQuyen: "create:combo",
    TrangThai: null,
    MoTa: "Quyền Thêm Combo",
  },
  {
    MaQuyen: "70",
    TenQuyen: "read:combo",
    TrangThai: null,
    MoTa: "Quyền Đọc Combo",
  },
  {
    MaQuyen: "71",
    TenQuyen: "update:combo",
    TrangThai: null,
    MoTa: "Quyền Cập nhật Combo",
  },
  {
    MaQuyen: "72",
    TenQuyen: "delete:combo",
    TrangThai: null,
    MoTa: "Quyền Xóa Combo",
  },
  {
    MaQuyen: "73",
    TenQuyen: "create:ghe",
    TrangThai: null,
    MoTa: "Quyền Thêm Ghế",
  },
  {
    MaQuyen: "74",
    TenQuyen: "read:ghe",
    TrangThai: null,
    MoTa: "Quyền Đọc Ghế",
  },
  {
    MaQuyen: "75",
    TenQuyen: "update:ghe",
    TrangThai: null,
    MoTa: "Quyền Cập nhật Ghế",
  },
  {
    MaQuyen: "76",
    TenQuyen: "delete:ghe",
    TrangThai: null,
    MoTa: "Quyền Xóa Ghế",
  },
  {
    MaQuyen: "77",
    TenQuyen: "create:hoandon",
    TrangThai: null,
    MoTa: "Quyền Thêm Hóa đơn",
  },
  {
    MaQuyen: "78",
    TenQuyen: "read:hoandon",
    TrangThai: null,
    MoTa: "Quyền Đọc Hóa đơn",
  },
  {
    MaQuyen: "79",
    TenQuyen: "update:hoandon",
    TrangThai: null,
    MoTa: "Quyền Cập nhật Hóa đơn",
  },
  {
    MaQuyen: "80",
    TenQuyen: "delete:hoandon",
    TrangThai: null,
    MoTa: "Quyền Xóa Hóa đơn",
  },
  {
    MaQuyen: "81",
    TenQuyen: "create:khuyenmai",
    TrangThai: null,
    MoTa: "Quyền Thêm Khuyến mãi",
  },
  {
    MaQuyen: "82",
    TenQuyen: "read:khuyenmai",
    TrangThai: null,
    MoTa: "Quyền Đọc Khuyến mãi",
  },
  {
    MaQuyen: "83",
    TenQuyen: "update:khuyenmai",
    TrangThai: null,
    MoTa: "Quyền Cập nhật Khuyến mãi",
  },
  {
    MaQuyen: "84",
    TenQuyen: "delete:khuyenmai",
    TrangThai: null,
    MoTa: "Quyền Xóa Khuyến mãi",
  },
  {
    MaQuyen: "85",
    TenQuyen: "create:loaighe",
    TrangThai: null,
    MoTa: "Quyền Thêm Loại ghế",
  },
  {
    MaQuyen: "86",
    TenQuyen: "read:loaighe",
    TrangThai: null,
    MoTa: "Quyền Đọc Loại ghế",
  },
  {
    MaQuyen: "87",
    TenQuyen: "update:loaighe",
    TrangThai: null,
    MoTa: "Quyền Cập nhật Loại ghế",
  },
  {
    MaQuyen: "88",
    TenQuyen: "delete:loaighe",
    TrangThai: null,
    MoTa: "Quyền Xóa Loại ghế",
  },
  {
    MaQuyen: "89",
    TenQuyen: "create:loaive",
    TrangThai: null,
    MoTa: "Quyền Thêm Loại vé",
  },
  {
    MaQuyen: "90",
    TenQuyen: "read:loaive",
    TrangThai: null,
    MoTa: "Quyền Đọc Loại vé",
  },
  {
    MaQuyen: "91",
    TenQuyen: "update:loaive",
    TrangThai: null,
    MoTa: "Quyền Cập nhật Loại vé",
  },
  {
    MaQuyen: "92",
    TenQuyen: "delete:loaive",
    TrangThai: null,
    MoTa: "Quyền Xóa Loại vé",
  },
  {
    MaQuyen: "93",
    TenQuyen: "create:nguoidung",
    TrangThai: null,
    MoTa: "Quyền Thêm Người dùng",
  },
  {
    MaQuyen: "94",
    TenQuyen: "read:nguoidung",
    TrangThai: null,
    MoTa: "Quyền Đọc Người dùng",
  },
  {
    MaQuyen: "95",
    TenQuyen: "update:nguoidung",
    TrangThai: null,
    MoTa: "Quyền Cập nhật Người dùng",
  },
  {
    MaQuyen: "96",
    TenQuyen: "delete:nguoidung",
    TrangThai: null,
    MoTa: "Quyền Xóa Người dùng",
  },
  {
    MaQuyen: "97",
    TenQuyen: "create:nhomquyen",
    TrangThai: null,
    MoTa: "Quyền Thêm Nhóm quyền",
  },
  {
    MaQuyen: "98",
    TenQuyen: "read:nhomquyen",
    TrangThai: null,
    MoTa: "Quyền Đọc Nhóm quyền",
  },
  {
    MaQuyen: "99",
    TenQuyen: "update:nhomquyen",
    TrangThai: null,
    MoTa: "Quyền Cập nhật Nhóm quyền",
  },
  {
    MaQuyen: "100",
    TenQuyen: "delete:nhomquyen",
    TrangThai: null,
    MoTa: "Quyền Xóa Nhóm quyền",
  },
  {
    MaQuyen: "101",
    TenQuyen: "create:phim",
    TrangThai: null,
    MoTa: "Quyền Thêm Phim",
  },
  {
    MaQuyen: "102",
    TenQuyen: "read:phim",
    TrangThai: null,
    MoTa: "Quyền Đọc Phim",
  },
  {
    MaQuyen: "103",
    TenQuyen: "update:phim",
    TrangThai: null,
    MoTa: "Quyền Cập nhật Phim",
  },
  {
    MaQuyen: "104",
    TenQuyen: "delete:phim",
    TrangThai: null,
    MoTa: "Quyền Xóa Phim",
  },
  {
    MaQuyen: "105",
    TenQuyen: "create:phongchieu",
    TrangThai: null,
    MoTa: "Quyền Thêm Phòng chiếu",
  },
  {
    MaQuyen: "106",
    TenQuyen: "read:phongchieu",
    TrangThai: null,
    MoTa: "Quyền Đọc Phòng chiếu",
  },
  {
    MaQuyen: "107",
    TenQuyen: "update:phongchieu",
    TrangThai: null,
    MoTa: "Quyền Cập nhật Phòng chiếu",
  },
  {
    MaQuyen: "108",
    TenQuyen: "delete:phongchieu",
    TrangThai: null,
    MoTa: "Quyền Xóa Phòng chiếu",
  },
  {
    MaQuyen: "109",
    TenQuyen: "create:quyen",
    TrangThai: null,
    MoTa: "Quyền Thêm Rạp chiếu",
  },
  {
    MaQuyen: "110",
    TenQuyen: "read:quyen",
    TrangThai: null,
    MoTa: "Quyền Đọc Rạp chiếu",
  },
  {
    MaQuyen: "111",
    TenQuyen: "update:quyen",
    TrangThai: null,
    MoTa: "Quyền Cập nhật Rạp chiếu",
  },
  {
    MaQuyen: "112",
    TenQuyen: "delete:quyen",
    TrangThai: null,
    MoTa: "Quyền Xóa Rạp chiếu",
  },
  {
    MaQuyen: "113",
    TenQuyen: "create:rapchieu",
    TrangThai: null,
    MoTa: "Quyền Thêm Suất chiếu",
  },
  {
    MaQuyen: "114",
    TenQuyen: "read:rapchieu",
    TrangThai: null,
    MoTa: "Quyền Đọc Suất chiếu",
  },
  {
    MaQuyen: "115",
    TenQuyen: "update:rapchieu",
    TrangThai: null,
    MoTa: "Quyền Cập nhật Suất chiếu",
  },
  {
    MaQuyen: "116",
    TenQuyen: "delete:rapchieu",
    TrangThai: null,
    MoTa: "Quyền Xóa Suất chiếu",
  },
  {
    MaQuyen: "117",
    TenQuyen: "create:suatchieu",
    TrangThai: null,
    MoTa: "Quyền Thêm Tài khoản",
  },
  {
    MaQuyen: "118",
    TenQuyen: "read:suatchieu",
    TrangThai: null,
    MoTa: "Quyền Đọc Tài khoản",
  },
  {
    MaQuyen: "119",
    TenQuyen: "update:suatchieu",
    TrangThai: null,
    MoTa: "Quyền Cập nhật Tài khoản",
  },
  {
    MaQuyen: "120",
    TenQuyen: "delete:suatchieu",
    TrangThai: null,
    MoTa: "Quyền Xóa Tài khoản",
  },
  {
    MaQuyen: "121",
    TenQuyen: "create:taikhoan",
    TrangThai: null,
    MoTa: "Quyền Thêm Thể loại",
  },
  {
    MaQuyen: "122",
    TenQuyen: "read:taikhoan",
    TrangThai: null,
    MoTa: "Quyền Đọc Thể loại",
  },
  {
    MaQuyen: "123",
    TenQuyen: "update:taikhoan",
    TrangThai: null,
    MoTa: "Quyền Cập nhật Thể loại",
  },
  {
    MaQuyen: "124",
    TenQuyen: "delete:taikhoan",
    TrangThai: null,
    MoTa: "Quyền Xóa Thể loại",
  },
  {
    MaQuyen: "125",
    TenQuyen: "create:theloai",
    TrangThai: null,
    MoTa: "Quyền Thêm Thức phẩm",
  },
  {
    MaQuyen: "126",
    TenQuyen: "read:theloai",
    TrangThai: null,
    MoTa: "Quyền Đọc Thức phẩm",
  },
  {
    MaQuyen: "127",
    TenQuyen: "update:theloai",
    TrangThai: null,
    MoTa: "Quyền Cập nhật Thức phẩm",
  },
  {
    MaQuyen: "128",
    TenQuyen: "delete:theloai",
    TrangThai: null,
    MoTa: "Quyền Xóa Thức phẩm",
  },
  {
    MaQuyen: "129",
    TenQuyen: "create:thucpham",
    TrangThai: null,
    MoTa: "Quyền Thêm Vé",
  },
  {
    MaQuyen: "130",
    TenQuyen: "read:thucpham",
    TrangThai: null,
    MoTa: "Quyền Đọc Vé",
  },
  {
    MaQuyen: "131",
    TenQuyen: "update:thucpham",
    TrangThai: null,
    MoTa: "Quyền Cập nhật Vé",
  },
  {
    MaQuyen: "132",
    TenQuyen: "delete:thucpham",
    TrangThai: null,
    MoTa: "Quyền Xóa Vé",
  },
  {
    MaQuyen: "133",
    TenQuyen: "create:ve",
    TrangThai: null,
    MoTa: "Quyền Thêm vé",
  },
  {
    MaQuyen: "134",
    TenQuyen: "read:ve",
    TrangThai: null,
    MoTa: "Quyền Đọc vé",
  },
  {
    MaQuyen: "135",
    TenQuyen: "update:ve",
    TrangThai: null,
    MoTa: "Quyền Cập nhật vé",
  },
  {
    MaQuyen: "136",
    TenQuyen: "delete:ve",
    TrangThai: null,
    MoTa: "Quyền Xóa vé",
  },
  {
    MaQuyen: "137",
    TenQuyen: "thongke",
    TrangThai: null,
    MoTa: "Xem thống kê báo cáo",
  },
  {
    MaQuyen: "138",
    TenQuyen: "config:website",
    TrangThai: null,
    MoTa: "Cấu hình trang web",
  },
];

const RESOURCE_NAME = {
  combo: "Combo",
  ghe: "Ghế",
  hoandon: "Hóa đơn",
  khuyenmai: "Khuyến mãi",
  loaighe: "Loại ghế",
  loaive: "Loại vé",
  nguoidung: "Người dùng",
  nhomquyen: "Nhóm quyền",
  phim: "Phim",
  phongchieu: "Phòng chiếu",
  quyen: "Quyền",
  rapchieu: "Rạp chiếu",
  suatchieu: "Suất chiếu",
  taikhoan: "Tài khoản",
  theloai: "Thể loại",
  thucpham: "Thực phẩm",
  ve: "Vé",
};
const ACTION_NAME = {
  create: "Thêm",
  read: "Xem",
  update: "Sửa",
  delete: "Xóa",
};
const _ = require("lodash");

const permissions = permision.map((p) => {
  let [action, resource] = p.TenQuyen.split(":");
  resource ??= action;
  return {
    action,
    resource,
    ...p,
  };
});

const groupByResource = _.groupBy(permissions, "resource");

const permissionsList = Object.keys(groupByResource).map((resource) => {
  return {
    resource,
    resource_name: RESOURCE_NAME[resource],
    actions: groupByResource[resource].map((p) => {
      return {
        ...p,
        action_name: ACTION_NAME[p.action],
      };
    }),
  };
});

console.log(JSON.stringify(permissionsList, null, 2));
const fs = require("fs");
fs.writeFileSync(
  "./permissions.json",
  JSON.stringify(permissionsList, null, 2)
);
